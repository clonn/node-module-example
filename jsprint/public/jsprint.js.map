{"version":3,"sources":["app/app.coffee","app/config.coffee"],"names":[],"mappings":"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","file":"public/jsprint.js","sourcesContent":["M = {\n  config: require 'jsprint/config'\n}\n\nclass Jsprint\n  # Configuration for Jsprint\n  CONFIG = new M.config.Main()\n\n  constructor: () ->\n    #CONFIG.print()\n    console.info? \"Jsprint version:\", CONFIG.getVersion()\n    @init()\n\n  init: ->\n    @renderImgLegends()\n    @headerFooter()\n    @aRef()\n    @createSummary()\n\n  createSummary: ->\n    JSP_TITLE2_NBR = undefined\n    JSP_TITLE3_NBR = undefined\n    JSP_TITLE4_NBR = undefined\n    JSP_TITLE_NBR = undefined\n    nbrtitle = undefined\n    pagenbr = undefined\n    JSP_TITLE_NBR = 0\n    JSP_TITLE2_NBR = 0\n    JSP_TITLE3_NBR = 0\n    JSP_TITLE4_NBR = 0\n    pagenbr = 0\n    nbrtitle = 0\n    header = @_getHeader()\n    $(\".\" + CONFIG.getClass(\"page\")).each (i, page) ->\n      pagenbr++\n      $(page).find(\".\" + CONFIG.getClass(\"title\")).each (_, title) ->\n        h_nbr = undefined\n        t = undefined\n        tag = undefined\n        t = $(title).text()\n        tag = $(this)[0].tagName\n        h_nbr = \"\"\n        nbrtitle++\n        if tag is \"H1\"\n          JSP_TITLE_NBR++\n          JSP_TITLE2_NBR = 0\n          h_nbr = JSP_TITLE_NBR\n        if tag is \"H2\"\n          JSP_TITLE2_NBR++\n          JSP_TITLE3_NBR = 0\n          h_nbr = JSP_TITLE_NBR + \".\" + JSP_TITLE2_NBR\n        if tag is \"H3\"\n          JSP_TITLE3_NBR++\n          JSP_TITLE4_NBR = 0\n          h_nbr = JSP_TITLE_NBR + \".\" + JSP_TITLE2_NBR + \".\" + JSP_TITLE3_NBR\n        if tag is \"H4\"\n          JSP_TITLE4_NBR++\n          h_nbr = JSP_TITLE_NBR + \".\" + JSP_TITLE2_NBR + \".\" +\n            JSP_TITLE3_NBR + \".\" + JSP_TITLE4_NBR\n        $(title).text h_nbr + \" \" + t\n        if nbrtitle % CONFIG.get(\"summary\", \"nbrtitle\") is 0\n          $(\".\" + CONFIG.getClass(\"page-summary\"))\n            .last().after \"</div><div class='\" +\n              CONFIG.getClass(\"page-summary\") + \" \" +\n              CONFIG.getClass(\"page\") + \"'><div class='\" +\n              CONFIG.getClass(\"summary\") + \"'></div>\"\n          $(\".\" + CONFIG.getClass(\"page-summary\")).last().prepend header\n        $(\".\" + CONFIG.getClass(\"summary\"))\n          .last().append \"<div class='\" + CONFIG.getClass(\"summary\") +\n          \"-\" + tag + \" \" + CONFIG.getClass(\"summary-entry\") +\n          \"'>\" + h_nbr + \" \" + t + \"<div>\" + pagenbr + \"</div></div>\"\n\n  aRef: ->\n    counter = 0\n    $(\"a\").each ->\n      counter++\n      link = undefined\n      ref = undefined\n      show = undefined\n      text = undefined\n      link = $(this).attr(\"href\")\n      text = $(this).text()\n      ref = $(this).attr(\"ref\")\n      show = text\n      show = ref + \"(\" + text + \")\"  if ref isnt undefined\n      $(this).append \" <sup>[\" + counter + \"]</sup>\"\n      $(\".\" + CONFIG.getClass(\"bibliography\"))\n        .append \"<div>\" + \"<span class='index'>[\" +\n          counter + \"] </span>\" + \"<span class='text'>\" +\n          show + \": \" + \"<span class='link'><a href='\" + link + \"'>\" +\n          link + \"</a></div>\"\n\n  renderImgLegends: ->\n    counter = 0\n    $(\"img\").each ->\n      title = $(this).attr(\"title\")\n      ref   = $(this).attr(\"ref\")\n      if title? || ref?\n        counter++\n        $(this).after \"\n          <div class='#{CONFIG.getClass(\"img-legend\")}'>\n          #{title} <sup>#{counter}</sup></div>\"\n        # TODO: this should be a function (appendImageography)\n        $(\".\" + CONFIG.getClass(\"imageography\")).append \"\n          <div>[#{counter}] #{title} <i>(#{ref}</i>)</div>\"\n\n  _getHeader: ->\n    \"<div class=\" + CONFIG.getClass(\"header\") + \">\" +\n      ($(\".\" + CONFIG.getClass(\"def-header\")).html() or \"\") + \"</div>\"\n\n  headerFooter: ->\n    $(\".\" + CONFIG.getClass(\"page\")).each (i, page) =>\n      outof = undefined\n      pagenbr = undefined\n      pagenbr = i + 1\n      $(page).prepend @_getHeader()\n      $(page).append \"<div class=\" + CONFIG.getClass(\"footer\") + \"></div>\"\n      outof = \"\"\n      outof = \"/\" +\n        $(\".#{CONFIG.getClass(\"page\")}\").length\n      $(page).find(\".\" + CONFIG.getClass(\"footer\")).append \"<div class=\" +\n        CONFIG.getClass(\"pagenbr\") + \">\" + pagenbr + outof +\n        \"</div>\"\n\njsprint = new Jsprint()\n","module.exports = exp = {}\n\nexp.Main = class Main\n  CLASS =\n    title:           \"jsprint-title\"\n    page:            \"jsprint-page\"\n    header:          \"jsprint-page-header\"\n    footer:          \"jsprint-page-footer\"\n    summary:         \"jsprint-summary\"\n    bibliography:    \"jsprint-bibliography\"\n    imageography:    \"jsprint-imageography\"\n    pagenbr:         \"jsprint-pagenbr\"\n    \"def-header\":    \"jsprint-def-header\"\n    \"page-summary\":  \"jsprint-page-summary\"\n    \"summary-entry\": \"jsprint-summary-entry\"\n    \"img-legend\":    \"jsprint-img-legend\"\n  VERSION = \"1.1\"\n  CONFIG =\n    summary:\n      nbrtitle: 45\n\n  constructor: -> null\n\n  print: ->\n    console.log \"CLASSES\", CLASS\n\n  getClass: (className) -> CLASS[className]\n\n  getVersion: -> VERSION\n\n  get: (configName, option) -> CONFIG[configName][option]\n"]}